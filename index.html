<!DOCTYPE html>
<html lang="en" class="dark" data-accent="default">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI MatchLab ULTRA</title>

  <link rel="icon" href="/favicon.ico" />
  <link rel="manifest" href="/manifest.json" />
  <link rel="apple-touch-icon" href="/assets/icons/apple-touch-icon.png" />

  <!-- PWA / Web App Capable -->
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="MatchLab" />
  <meta name="theme-color" content="#050711" />

  <!-- CSS -->
  <link rel="stylesheet" href="/assets/css/theme.css" />
  <link rel="stylesheet" href="/assets/css/style.css" />
  <link rel="stylesheet" href="/assets/css/accordion.css" />
  <link rel="stylesheet" href="/assets/css/matches.css" />
  <link rel="stylesheet" href="/assets/css/odds.css" />
  <link rel="stylesheet" href="/assets/css/right-panels.css" />
  <link rel="stylesheet" href="/assets/css/skin-premium.css" />
</head>

<body>
  <!-- INLINE UI ICON SPRITE -->
  <svg xmlns="http://www.w3.org/2000/svg" style="display:none">
    <symbol id="i-globe" viewBox="0 0 24 24">
      <path d="M12 22a10 10 0 1 0-10-10 10 10 0 0 0 10 10Z"/>
      <path d="M2 12h20"/>
      <path d="M12 2a15 15 0 0 1 0 20"/>
      <path d="M12 2a15 15 0 0 0 0 20"/>
    </symbol>

    <symbol id="i-palette" viewBox="0 0 24 24">
      <path d="M12 22a10 10 0 1 1 0-20c5.5 0 10 4 10 9 0 2-1.2 3-3 3h-2c-1.1 0-2 .9-2 2 0 1.7-1.3 3-3 3Z"/>
      <path d="M7.5 10.5h0"/>
      <path d="M10.5 7.5h0"/>
      <path d="M13.5 7.5h0"/>
      <path d="M16.5 10.5h0"/>
    </symbol>

    <symbol id="i-scale" viewBox="0 0 24 24">
      <path d="M12 3v18"/>
      <path d="M6 7h12"/>
      <path d="M6 7l-3 6h6l-3-6Z"/>
      <path d="M18 7l-3 6h6l-3-6Z"/>
      <path d="M8 21h8"/>
    </symbol>

    <symbol id="i-home" viewBox="0 0 24 24">
      <path d="M3 10.5 12 3l9 7.5"/>
      <path d="M5 10v11h14V10"/>
      <path d="M10 21v-7h4v7"/>
    </symbol>

    <symbol id="i-back" viewBox="0 0 24 24">
      <path d="M15 18l-6-6 6-6"/>
    </symbol>

    <symbol id="i-download" viewBox="0 0 24 24">
      <path d="M12 3v10"/>
      <path d="M8 11l4 4 4-4"/>
      <path d="M4 21h16"/>
    </symbol>

    <symbol id="i-menu" viewBox="0 0 24 24">
      <path d="M4 7h16"/>
      <path d="M4 12h16"/>
      <path d="M4 17h16"/>
    </symbol>

    <symbol id="i-panels" viewBox="0 0 24 24">
      <path d="M4 5h7v14H4z"/>
      <path d="M13 5h7v6h-7z"/>
      <path d="M13 13h7v6h-7z"/>
    </symbol>
  </svg>

  <!-- UPDATE BANNER -->
  <div id="update-banner" class="update-banner hidden">
    <span>New version available.</span>
    <button id="btn-update-now" class="btn">Update</button>
  </div>

  <!-- TOPBAR -->
  <header class="app-topbar">
    <div class="topbar-left">
      <button id="btn-back" class="icon-button tooltip" aria-label="Back" title="Back" data-tooltip="Back">
        <svg class="ui-ico" aria-hidden="true"><use href="#i-back"></use></svg>
      </button>

      <button id="btn-home" class="icon-button tooltip" aria-label="Home" title="Home" data-tooltip="Home">
        <svg class="ui-ico" aria-hidden="true"><use href="#i-home"></use></svg>
      </button>
    </div>

    <div class="topbar-center">
      <img src="/assets/icons/logo-header.png" alt="AIML" class="topbar-logo" />
      <div class="topbar-brand">
        <div class="brand-title">AI MatchLab ULTRA</div>
        <div class="brand-version">
          <span class="ver-pill">v2.3.1</span>
          <span class="ver-sub">Global Live Lab</span>
        </div>
      </div>
    </div>

    <div class="topbar-row2-right mobile-only">
      <button id="btn-drawer" class="icon-button tooltip" aria-label="Menu" title="Menu" data-tooltip="Menu">
        <svg class="ui-ico" aria-hidden="true"><use href="#i-menu"></use></svg>
      </button>

      <button id="btn-panels" class="icon-button tooltip" aria-label="Panels" title="Panels" data-tooltip="Panels">
        <svg class="ui-ico" aria-hidden="true"><use href="#i-panels"></use></svg>
      </button>
    </div>

    <div class="topbar-right">
      <button id="btn-install" class="icon-button tooltip" aria-label="Install" title="Install" data-tooltip="Install" style="display:none">
        <svg class="ui-ico" aria-hidden="true"><use href="#i-download"></use></svg>
        <span class="btn-text">Install</span>
      </button>

      <button id="btn-lang" class="icon-button tooltip" aria-label="Language" title="Language" data-tooltip="Language">
        <svg class="ui-ico" aria-hidden="true"><use href="#i-globe"></use></svg>
        <span class="btn-text">EN</span>
      </button>

      <button id="btn-theme" class="icon-button tooltip" aria-label="Theme" title="Theme" data-tooltip="Theme">
        <svg class="ui-ico" aria-hidden="true"><use href="#i-palette"></use></svg>
      </button>

      <button id="btn-legal" class="icon-button tooltip" aria-label="Legal" title="Legal" data-tooltip="Legal">
        <svg class="ui-ico" aria-hidden="true"><use href="#i-scale"></use></svg>
      </button>
    </div>

    <!-- THEME MENU -->
    <div id="theme-menu" class="popover hidden" role="dialog" aria-label="Theme menu" aria-hidden="true">
      <div class="popover-header">
        <div class="popover-title">Theme</div>
        <button id="btn-theme-close" class="icon-button" aria-label="Close" title="Close">
          <span class="btn-text">✕</span>
        </button>
      </div>

      <div class="popover-body">
        <div class="popover-section-title">Mode</div>
        <button class="popover-link" data-theme-mode="dark">Dark</button>
        <button class="popover-link" data-theme-mode="light">Light</button>

        <div class="popover-section-title" style="margin-top:10px;">Accents</div>
        <button class="popover-link" data-accent="default">Blue / Orange (Default)</button>
        <button class="popover-link" data-accent="green-gold">Green / Gold</button>
        <button class="popover-link" data-accent="red-silver">Crimson / Silver</button>
        <button class="popover-link" data-accent="purple-aqua">Purple / Aqua</button>
        <button class="popover-link" data-accent="black-lime">Neon / Spectrum</button>
        <button class="popover-link" data-accent="minimal">Minimal (Classic)</button>
      </div>
    </div>

    <!-- LEGAL MENU -->
    <div id="legal-menu" class="popover hidden" role="dialog" aria-label="Legal menu" aria-hidden="true">
      <div class="popover-header">
        <div class="popover-title">Legal</div>
        <button id="btn-legal-close" class="icon-button" aria-label="Close" title="Close">
          <span class="btn-text">✕</span>
        </button>
      </div>
      <div class="popover-body">
        <a class="popover-link" href="/legal/terms.html" target="_blank" rel="noopener">Terms</a>
        <a class="popover-link" href="/legal/privacy.html" target="_blank" rel="noopener">Privacy</a>
        <a class="popover-link" href="/legal/impressum.html" target="_blank" rel="noopener">Impressum</a>
        <a class="popover-link" href="/legal/disclaimer.html" target="_blank" rel="noopener">Disclaimer</a>
        <a class="popover-link" href="/legal/cookies.html" target="_blank" rel="noopener">Cookies</a>
      </div>
    </div>
  </header>

  <!-- MOBILE DRAWER OVERLAY -->
  <div id="drawer-overlay" class="drawer-overlay" aria-hidden="true"></div>

  <!-- MAIN LAYOUT -->
  <div class="app-shell">
    <main class="app-main">

      <!-- LEFT -->
      <aside id="left-panel" class="app-panel">
        <div class="panel-header">
          <div class="panel-title">Navigation</div>
        </div>
        <div class="panel-body">
          <div class="accordion" id="left-accordion">

            <div class="accordion-item">
              <div class="accordion-header" data-target="panel-continents">Continents</div>
              <div class="accordion-panel" id="panel-continents">
                <div class="list" id="continents-list"></div>
              </div>
            </div>

            <div class="accordion-item">
              <div class="accordion-header" data-target="panel-countries">Countries</div>
              <div class="accordion-panel" id="panel-countries">
                <div class="list" id="countries-list"></div>
              </div>
            </div>

            <div class="accordion-item">
              <div class="accordion-header" data-target="panel-leagues">Leagues</div>
              <div class="accordion-panel" id="panel-leagues">
                <div class="list" id="leagues-list"></div>
              </div>
            </div>

            <div class="accordion-item">
              <div class="accordion-header" data-target="panel-matches">Matches</div>
              <div class="accordion-panel" id="panel-matches">
                <div class="list" id="matches-list"></div>
              </div>
            </div>

            <!-- NEW: TODAY (Independent panel) -->
            <div class="accordion-item">
              <div class="accordion-header" data-target="panel-today">Today</div>
              <div class="accordion-panel" id="panel-today">
                <div class="list" id="today-list"></div>
              </div>
            </div>

            <div class="accordion-item">
              <div class="accordion-header" data-target="panel-saved">Saved</div>
              <div class="accordion-panel" id="panel-saved">
                <div class="list" id="saved-list"></div>
              </div>
            </div>

          </div>
        </div>
      </aside>

      <!-- CENTER -->
      <section id="center-panel" class="app-panel">
        <div class="panel-header">
          <div class="panel-title">Odds Intelligence Center</div>
        </div>

        <div class="panel-body">
          <div class="active-match-bar" id="active-match-bar">
            <div class="amb-title" id="amb-title">No match selected</div>
            <div class="amb-sub" id="amb-sub">Select a match from the left panel.</div>
          </div>

          <div class="odds-grid">
            <section class="odds-card" id="odds-card-greek">
              <header class="odds-card-header">
                <div class="odds-card-title">Greek</div>
              </header>
              <div class="odds-card-body" id="greek-odds-body">Select a match</div>
            </section>

            <section class="odds-card" id="odds-card-eu">
              <header class="odds-card-header">
                <div class="odds-card-title">European</div>
              </header>
              <div class="odds-card-body" id="eu-odds-body">Select a match</div>
            </section>

            <section class="odds-card" id="odds-card-asian">
              <header class="odds-card-header">
                <div class="odds-card-title">Asian</div>
              </header>
              <div class="odds-card-body" id="asian-odds-body">Select a match</div>
            </section>

            <section class="odds-card" id="odds-card-betfair">
              <header class="odds-card-header">
                <div class="odds-card-title">Betfair</div>
              </header>
              <div class="odds-card-body" id="betfair-odds-body">Select a match</div>
            </section>
          </div>
        </div>
      </section>

      <!-- RIGHT -->
      <aside id="right-panel" class="app-panel">
        <div class="panel-header">
          <div class="panel-title">Intelligence Panels</div>
        </div>

        <div class="panel-body right-stack">
          <section class="right-card" id="card-radar">
            <header class="right-card-header">
              <div class="panel-title">AI Radar · Line Moves</div>
              <div class="right-meta" id="radar-meta">Offline (demo)</div>
            </header>
            <div class="right-card-body" id="panel-radar">
              <div class="right-list" id="radar-list"></div>
            </div>
          </section>

          <section class="right-card" id="card-top-picks">
            <header class="right-card-header">
              <div class="panel-title">AI Smart Money · Top Picks</div>
              <div class="right-meta" id="picks-meta">Offline (demo)</div>
            </header>
            <div class="right-card-body" id="panel-top-picks">
              <div class="right-list" id="picks-list"></div>

              <div class="right-subpanel" id="panel-deviations">
                <div class="right-subheader">
                  <div class="sub-title">Deviations · Δ≥0.20</div>
                  <div class="right-meta" id="deviations-meta">Offline (demo)</div>
                </div>
                <div class="right-subbody">
                  <div class="right-list" id="deviations-list"></div>
                </div>
              </div>
            </div>
          </section>

          <section class="right-card" id="card-live">
            <header class="right-card-header">
              <div class="panel-title">Live Matches</div>
              <div class="right-meta" id="live-meta">Service offline</div>
            </header>
            <div class="right-card-body" id="panel-live">
              <div class="right-list" id="live-list"></div>
            </div>
          </section>
        </div>
      </aside>

    </main>
  </div>

  <!-- MATCH DETAILS MODAL -->
  <div id="match-details-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop" data-close="1"></div>

    <div class="modal-dialog" role="dialog" aria-modal="true" aria-label="Match details">
      <div class="modal-header">
        <div class="modal-title">Match Details</div>
        <button id="btn-details-close" class="icon-button" aria-label="Close">
          <span class="btn-text">✕</span>
        </button>
      </div>
      <div id="panel-details" class="modal-body">Select a match to view details.</div>
    </div>
  </div>

<!-- SCRIPTS (ORDER FIXED) -->
<script defer src="/assets/js/ui/app.js"></script>

<!-- Theme / Legal -->
<script defer src="/assets/js/theme.js"></script>
<script defer src="/assets/js/legal-menu.js"></script>

<!-- Core -->
<script defer src="/assets/js/install.js"></script>
<script defer src="/assets/js/state.js"></script>

<!-- Left navigation / accordion -->
<script defer src="/assets/js/ui/accordion.js"></script>
<script defer src="/assets/js/ui/navigation.js"></script>

<!-- Saved -->
<script defer src="/assets/js/ui/saved-store.js"></script>
<script defer src="/assets/js/ui/saved-panel.js"></script>

<!-- Matches + Today -->
<script defer src="/assets/js/ui/matches-panel.js"></script>
<script defer src="/assets/js/ui/today-panel.js"></script>

<!-- Details modal (REQUIRED for i) -->
<script defer src="/assets/js/ui/details-modal.js"></script>

<!-- Center odds -->
<script defer src="/assets/js/ui/odds-panels.js"></script>
<script defer src="/assets/js/ui/odds-radar.js"></script>

<!-- Right panels -->
<script defer src="/assets/js/right-panels.js"></script>

<!-- UI helpers -->
<script defer src="/assets/js/mobile-ui.js"></script>
<script defer src="/assets/js/language.js"></script>
<script defer src="/assets/js/utils/version-check.js"></script>

<script>
  (function () {
    if (!("serviceWorker" in navigator)) return;
    navigator.serviceWorker.register("/sw.js").catch(function () {});
  })();
</script>

</body>
</html>
